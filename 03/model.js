import Symbol from "./globedef/symbol.js"
import Table from "./globedef/table.js"

class Model {
    constructor() {
        this.TableStrip = {
            [Table.MainGame1]: [
                ['H2', 'N2', 'H2', 'N3', 'H1', 'H1', 'H3', 'N3', 'H3', 'F', 'N1', 'N1', 'N1', 'N1'],
                ['N3', 'N3', 'H2', 'N2', 'H4', 'H3', 'H2', 'N3', 'N5', 'F', 'N2', 'N2', 'N2', 'N2'],
                ['N2', 'N5', 'H3', 'N3', 'N4', 'H2', 'H3', 'N3', 'H3', 'F', 'N3', 'N3', 'N3', 'N3'],
                ['N2', 'N2', 'H3', 'N3', 'N3', 'H2', 'N4', 'H4', 'N4', 'F', 'N4', 'N4', 'N4', 'N4'],
                ['H4', 'N3', 'N1', 'H3', 'H3', 'N5', 'N3', 'H3', 'N1', 'F', 'N5', 'N5', 'N5', 'N5'],
                ['N5', 'H4', 'N3', 'N3', 'N2', 'N2', 'H1', 'H1', 'H3', 'N1', 'N2', 'N3', 'N4', 'N5']
            ],
            [Table.FreeGame1]: [
                ['H2', 'N2', 'H2', 'N3', 'H1', 'H1', 'H3', 'N3', 'H3', 'F', 'N1', 'N1', 'N1', 'N1'],
                ['N3', 'N3', 'H2', 'N2', 'H4', 'H3', 'H2', 'N3', 'N5', 'F', 'N2', 'N2', 'N2', 'N2'],
                ['N2', 'N5', 'H3', 'N3', 'N4', 'H2', 'H3', 'N3', 'H3', 'F', 'N3', 'N3', 'N3', 'N3'],
                ['N2', 'N2', 'H3', 'N3', 'N3', 'H2', 'N4', 'H4', 'N4', 'F', 'N4', 'N4', 'N4', 'N4'],
                ['H4', 'N3', 'N1', 'H3', 'H3', 'N5', 'N3', 'H3', 'N1', 'F', 'N5', 'N5', 'N5', 'N5'],
                ['N5', 'H4', 'N3', 'N3', 'N2', 'N2', 'H1', 'H1', 'H3', 'N1', 'N2', 'N3', 'N4', 'N5']
            ],
        }

        this.PayTable = {
            [Symbol.H1]: [0, 200, 500, 1000],
            [Symbol.H2]: [0, 50, 200, 500],
            [Symbol.H3]: [0, 40, 100, 300],
            [Symbol.H4]: [0, 30, 40, 240],
            [Symbol.H5]: [0, 0, 0, 0],
            [Symbol.N1]: [0, 20, 30, 200],
            [Symbol.N2]: [0, 16, 24, 160],
            [Symbol.N3]: [0, 10, 20, 100],
            [Symbol.N4]: [0, 8, 18, 80],
            [Symbol.N5]: [0, 5, 15, 40],
            [Symbol.N6]: [0, 0, 0, 0],
            [Symbol.F]: [0, 0, 0, 0, 3, 5, 100]
        }

        // æœ€å°‘è§¸ç™¼ FG çš„ Scatter å€‹æ•¸
        this.MinScatterCount = 4

        this.TriggerFreeSpins = 15 // mg => fg

        this.RetriggerFreeSpins = 5 // fg => fg

        this.MaxFreeSpins = 100

        // æ–°å¢å…§å®¹ ğŸ‘‡

        /** 
         * å–®å€‹ä½ç½®æ‰“é›·çš„å€æ•¸æ¬Šé‡è¡¨
         * ä¸‹é¢ç¯„ä¾‹æ˜¯ä¸»éŠæˆ²è·Ÿå…è²»éŠæˆ²çš„æ¬Šé‡éƒ½ä¸åŒ
         * åœ¨å¯¦å‹™è¨­è¨ˆä¸Šç”šè‡³æ˜¯å¯ä»¥å¤šå€‹ Free Game è¡¨ã€‚ä¾‹å¦‚ 
         * 1. FG1 æ¯”è¼ƒå®¹æ˜“ä¸­çï¼Œä½†æ‰“é›·çš„å€æ•¸æœ€å¤šå°± 50x
         * 2. FG2 æ¯”è¼ƒé›£ä¸­çï¼Œä½†æ‰“é›·éƒ¨å€æ•¸å°±æ˜¯ 30x èµ·ï¼Œæœ€å¤š 500x          
         */
        this.MultipleWeightTable = {
            [Table.MainGame1]: new Map([
                [2, 70],
                [3, 20],
                [5, 10]
            ]),
            [Table.FreeGame1]: new Map([
                // åŠ ç¸½æ˜¯ 100000
                [10, 33333], // 10 å€æ˜¯ 33.333%
                [20, 33333], // 10 å€æ˜¯ 33.333%
                [50, 33333], // 10 å€æ˜¯ 33.333%
                [500, 1]    // 500 å€æ˜¯  0.001%
            ])
        }

        // ä¸€æ¬¡éŠæˆ²å®Œæ•´æ­·ç¨‹æœƒå‡ºç¾å¹¾å€‹ä½ç½®æ‰“é›·
        this.MultipleCountTable = {
            [Table.MainGame1]: new Map([
                [0, 70], // æ²’æ‰“é›·çš„æ©Ÿç‡ 70%
                [1, 20], // 1 å€‹ä½ç½®æ‰“é›·çš„æ©Ÿç‡ 20%
                [2, 10]  // 2 å€‹ä½ç½®æ‰“é›·çš„æ©Ÿç‡ 10%
            ]),
            [Table.FreeGame1]: new Map([
                // åŠ ç¸½æ˜¯ 100000
                [0, 33333], // æ²’æ‰“é›·çš„æ©Ÿç‡ 33.333%
                [3, 33333], // 3 å€‹ä½ç½®æ‰“é›·çš„æ©Ÿç‡ 33.333%
                [5, 33333], // 5 å€‹ä½ç½®æ‰“é›·çš„æ©Ÿç‡ 33.333%
                [8, 1]      // 8 å€‹ä½ç½®æ‰“é›·çš„æ©Ÿç‡ 0.001%
            ])
        }

        // æ–°å¢å…§å®¹ ğŸ‘†
    }

    pay(symbol, cnt) {
        let c = cnt
        if (symbol == Symbol.F) {
            if (cnt > 6) {
                c = 6
            }
        } else {
            if (cnt < 8) {
                c = 0
            } else if (cnt < 10) {
                c = 1
            } else if (cnt < 12) {
                c = 2
            } else {
                c = 3
            }
        }

        return this.PayTable[symbol][c]
    }
}

export default Model